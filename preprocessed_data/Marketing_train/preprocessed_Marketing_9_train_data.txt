market attribut data model b2b compani . | vladimir kobzev | apr , 2024 | mediumopen appsign upsign inwritesign upsign inmarket attribut data model b2b company.vladimir kobzev·follow7 min read·apr 1 , 2024 -- listensharemi previou medium post : market attribut , uniq b2b , might help ? big pictur maximum complex case use one web analyt event sourc simultan : ga4 mixpanel , addit custom spreadsheet ( outbound offlin confer input ) , 20+ paid ad channels.market attribut data transform lineagecont : event data extract . event map revenu big tabl . event entiti . match sales|revenu data crm . attribut metric calculation.data extractiongoogl analytics.btw . use ga4 , pleas ’ forget set user id . guideher step-by-step setup get event ga4 bigquery.and code make singl dataset daili partit across multipl ga4 propertiesher code extract event datetim readabl formati like build attribut clikchous . also like . type cast need extract . code prepar data send clickhous . use airbyt connector bigqueri via gcsmixpanelrow event export endpoint . export bigqueri clickhouse.offline|sal event extractionfor salesfourc , hubspot , zohocrm , netsuit , whatev crm use : airbyt . salesforc , hubspot.estudiari . salesforc , hubspotimprovado . ’ want spend engin ’ time set upbefor move map event one big tabl , need explain cool save hour , day , week , mayb year engineering.introduc : “ revenu big tabl ” . batman fight market attribut nightmare.challeng . let introduc classic data engin nightmar : “ sale team decid add field salesforc need use output calculations. ” . caus enorm work pass field begin end calculation.solut . geniu idea activ schema . think “ revenu big tabl ” could good name attribut use case . row exampl : revenu big tabl . row exampleher data contract revenu big tabl structur spec : bigqueri data contract ymlclickhous data contract ymlevent iddata qualiti : ensur event id uniq suitabl mani thing . make test priority.act . field defin busi logic.everi type activ usual usual featur . exampl , “ web view ” sourc info , “ sale qualifi ” “ opportun amount. ” data qualiti monitor practic . ’ good practic explicit list “ expect activ ” alert new name ad . pleas ! ’ restrict filter wrong name . reduc qa possibl lot . imagin cool realiz data incorrect ga4 chang spec sale team chang stage name.prospect id.standard option : domain , email , crm_account_id , ga4_user_id.it might complic synthet id . exampl , hash solv situat like crm_account_id , use ; , use ga4_user_iddata qualiti : row empti prospect id good.featuresth best featur structur featur map ( key , valu ) .clickhous , bigqueri ’ . gbq array tupl . wrote simpl code dbt function ( macro ) access featur key . decid avoid work json . bc global climat chang ai ask reduc string pars reason possible.btw . snowflak databrikc map ( ) type.featur data qualiti : check exist featur key list match activ type . exampl , “ web event ” ’ : “ sale engin ” .sourc tabl namethi valuabl field debug . sinc debug king . need it.market channel mappingsearch organ . divid “ non-brand organ ” “ brand organ ” good almost case . organ brand usual bring traffic page , logic detect organ brand check short list landings.mov channel map data model code market need check sometim correct details.her work exampl market channel map googl spreadsheet . code bigqueri clickhousemap sourc tabl revenu big tableaft prepar done , gpt write map quit well . need provid : row tabl , need maprevenu big babl data contracts.featur map . like “ opp_sum ” - > “ opportunity_amount_usd ” . thing check care coordin across variou sources.ev entiti . revers data engineering.first , move activ schema idea , felt excel . , one need input tabl ’ event . one join , anoth event tabl . final , realiz joker . valu singl data contract anymore.but , sometim later , decid map entiti events.in data engin , refer concept accumul snapshot kimbl dimension modeling.match sales|revenu data crm web dataus case need : three month web event traffic sourc , event crm revenu amount.or mani stage : market qualifi , sale qualifi , propos , … need attribut market channel event goals.ther two option solv use case : send web analytics-user_id crm.send crm user_id web-analyticssend web analytics-user_id crmthi much complic implement case second one . sinc option look intuit , disclos it.push web analyt user_id crmi could implementedfirst ; need get web analyt user_id . javascript code get googl analyt 4 user_idthen , need add web analyt user id crm event . code exampl ad googl user_id properti hubspot contactwhi could tricki ? particular case hubspot , ’ pretti straightforward . howev , salesforc , frontend api request might requir custom solut depend specif api configur , might take signific time.send crm user_id web analyt trackercrm user_id web analyticsif user email play role crm_user_id , might good idea push web analyt . recommend hash email ( privaci complianc , first ) need set : hash email ( anoth crm user id ) . code examplesend crm user_id data layer . exampl wordpress graviti formscatch user_id data layer . exampl via googl tag manag googl analyt 4variabl set . go : http : //tagmanager.google.com/googl tag manag hash email data layer variabl set upand push email hash ga4 . screenshot , name hash email user_id ( think wrong idea ) .push hash email googl analyt 4 set up.attribut metric calculationstandard requir market attribut model : attribut window . old interact ’ need attribut . case , ’ attribut old paid visit facebook.exclud event sale interact start . exampl , click call invit email could nois make decisions.her dbt model lineag calcul attribut metric revenu big tabl compli data contractther googl spreadsheet param need set : marketing_channel_featuresmarketing_and_sales_goalsgsheet_marketing_attribution_coded_paramsvladimir.p. : like ? pleas press like github account . motiv lot.data engineeringmarket automationgoogl analyticsweb analyticsdata model -- -- followwritten vladimir kobzev215 followersdata engin / statist / probabilityfollowhelpstatusaboutcareersblogprivacytermstext speechteam